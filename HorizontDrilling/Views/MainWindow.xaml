<adonisControls:AdonisWindow x:Class="HorizontDrilling.MainWindow"
        x:Name="WindowMain"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:a="http://schemas.xceed.com/wpf/xaml/avalondock"  
        xmlns:avalonDockProperties="http://schemas.xceed.com/wpf/xaml/avalondock"
        xmlns:avalonDockConverters="http://schemas.xceed.com/wpf/xaml/avalondock"
        xmlns:adconv="clr-namespace:Xceed.Wpf.AvalonDock.Converters;assembly=Xceed.Wpf.AvalonDock"
        xmlns:local="clr-namespace:HorizontDrilling"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        xmlns:c="clr-namespace:Core;assembly=Core"
        xmlns:vm="clr-namespace:HorizontDrilling.ViewModels"
        xmlns:vp="clr-namespace:HorizontDrilling.Views.Pane"
        xmlns:res="clr-namespace:HorizontDrilling.Properties"        
        xmlns:i="http://schemas.microsoft.com/xaml/behaviors"

        xmlns:adonisUi="clr-namespace:AdonisUI;assembly=AdonisUI"
        xmlns:adonisControls="clr-namespace:AdonisUI.Controls;assembly=AdonisUI"
        xmlns:adonisExtensions="clr-namespace:AdonisUI.Extensions;assembly=AdonisUI"
        mc:Ignorable="d"
                             
        Title="MainWindow" Height="450" Width="800"
                             
		MaxWidth="{x:Static SystemParameters.MaximizedPrimaryScreenWidth}" 
		MaxHeight="{x:Static SystemParameters.MaximizedPrimaryScreenHeight}" 
                             
        Loaded="WindowMain_Loaded"
        Closing="WindowMain_Closing"
        IconVisibility="Collapsed"
        TitleVisibility="Collapsed"
                             TitleBarBackground="{Binding Background, ElementName=toolBarMenu}">

    <!--TitleBarBackground="{Binding Background, ElementName=toolBarMenu}"
        Background="{Binding Background, ElementName=toolBarMenu}"
        Foreground="{Binding Foreground, ElementName=toolBarMenu}"-->

    <adonisControls:AdonisWindow.Resources>
        <ResourceDictionary>
            <!--<Style x:Key="FormImageKey" TargetType="{x:Type Image}">
                <Setter Property="Fo
                        Value="16" />

            </Style>-->
            <!--<vm:CloseProgramCommand x:Key="CloseProgramCommandKey" />-->
            <adconv:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter" />
            <DataTemplate x:Key="LayoutDocumentHeaderKey" DataType="{x:Type a:LayoutDocument}">
                <StackPanel Orientation="Horizontal"
                            MinWidth="60">
                    <!--<TextBlock Visibility="{Binding Content.IconSourceIsNotUri, Converter={StaticResource BoolToVisibilityConverter}}" FontFamily="Segoe Fluent Icons"
                        Text="{Binding Content.IconSource}" VerticalAlignment="Center" />-->
                    <!--Visibility="{Binding Content.IconSourceIsUri, Converter={StaticResource BoolToVisibilityConverter}}"-->
                    <Image 
                           Stretch="None"
                            Source="{Binding IconSource}"
                           Margin="2"/>
                    <TextBlock Text="{Binding Title}"  Margin="2"/>
                </StackPanel>
            </DataTemplate>
            <vm:RootFileDocumentVMtoStringConverter x:Key="RootFileDocumentVMtoStringConverterKey" />
            <local:VMtoLayoutContentConverter x:Key="VMtoLayoutContentConverterKey"/>
            <vp:LayoutInitializer x:Key="LayoutInitializerKey"/>
            <c:PanesStyleSelector x:Key="PanesStyleSelectorKey"/>
            <c:PanesTemplateSelector x:Key="PanesTemplateSelectorKey"/>
            <c:DockManagerVM x:Key="DockManagerVMKey"/>
            <c:MenuTemplateSelector x:Key="MenuTemplateSelectorVMKey"/>
            <c:ToolTemplateSelector x:Key="ToolTemplateSelectorVMKey"/>
            <!--<c:ItemContainerStyleSelectorVM x:Key="ItemContainerStyleSelectorVMKey"/>-->
            <ResourceDictionary.MergedDictionaries>
                <!--<ResourceDictionary Source=" "/>-->
                <ResourceDictionary Source="/HorizontDrilling;component/Views/USO32/Uso32Dictionary.xaml"/>
                <!--<ResourceDictionary Source="/Core;component/ViewResourceForms.xaml" />-->
                <!--<ResourceDictionary Source="/Xceed.Wpf.AvalonDock.NET5;component/Themes/Default.xaml"/>
                <ResourceDictionary>
                    <x:Array x:Key="m1" Type="{x:Type c:PriorityMenu}">
                        <c:PriorityMenu Priority="11" Header="{x:Static avalonDockProperties:Resources.Anchorable_Float}"
                            Command="{Binding Path=FloatCommand}" />
                        <c:PriorityMenu Priority="12" Header="{x:Static avalonDockProperties:Resources.Anchorable_Dock}"
                            Command="{Binding Path=DockCommand}" />
                        <c:PriorityMenu Priority="13" Header="{x:Static avalonDockProperties:Resources.Anchorable_DockAsDocument}"
                            Command="{Binding Path=DockAsDocumentCommand}" />
                        <c:PriorityMenu Priority="14" Header="{Binding LayoutElement.IsAutoHidden, Converter={StaticResource AnchorableContextMenuAutoHideHeaderConverter}}"
                            Command="{Binding Path=AutoHideCommand}" />
                        <c:PriorityMenu Priority="15" Header="{x:Static avalonDockProperties:Resources.Document_Close}"
                            Command="{Binding Path=CloseCommand}"
                                Visibility="{Binding Path=IsEnabled, RelativeSource={RelativeSource Self}, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}" />
                        <c:PriorityMenu Priority="16" Header="{x:Static avalonDockProperties:Resources.Anchorable_Hide}"
								Command="{Binding Path=HideCommand}">
                            <c:PriorityMenu.Visibility>
                                <MultiBinding Converter="{StaticResource AnchorableContextMenuHideVisibilityConverter}">
                                    <Binding Path="IsEnabled"
								             RelativeSource="{RelativeSource Self}"
				                             Mode="OneWay"
				                             Converter="{StaticResource BoolToVisibilityConverter}" />
                                    <Binding Path="CanClose" />
                                </MultiBinding>
                            </c:PriorityMenu.Visibility>
                        </c:PriorityMenu>
					</x:Array>
                    <x:Array x:Key="m2" Type="{x:Type c:PriorityMenu}">
                        <c:PriorityMenu Priority="21" Header="m1">
                            <c:PriorityMenu.Icon>
                                <Image Source="/Xceed.Wpf.AvalonDock.NET5;component/Themes/Generic/Images/InnerDockPaneTop.png" />
                            </c:PriorityMenu.Icon>
                        </c:PriorityMenu>
                        <c:PriorityMenu Priority="22" Header="m2">
                            <c:PriorityMenu.Icon>
                                <Image Source="/Xceed.Wpf.AvalonDock.NET5;component/Themes/Generic/Images/InnerDockPaneTop.png" />
                            </c:PriorityMenu.Icon>
                        </c:PriorityMenu>
                        <c:PriorityMenu Priority="23" Header="m3">
                            <c:PriorityMenu.Icon>
                                <Image Source="/Xceed.Wpf.AvalonDock.NET5;component/Themes/Generic/Images/InnerDockPaneTop.png" />
                            </c:PriorityMenu.Icon>
                        </c:PriorityMenu>
                        <c:PriorityMenu Priority="24" Header="m4">
                            <c:PriorityMenu.Icon>
                                <Image Source="/Xceed.Wpf.AvalonDock.NET5;component/Themes/Generic/Images/InnerDockPaneTop.png" />
                            </c:PriorityMenu.Icon>
                        </c:PriorityMenu>
                    </x:Array>
                </ResourceDictionary>-->
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </adonisControls:AdonisWindow.Resources>

    <adonisControls:AdonisWindow.InputBindings>
        <KeyBinding Command="{Binding CloseProgramCommand}"
                    Gesture="Alt+F4" />
    </adonisControls:AdonisWindow.InputBindings>

    <adonisControls:AdonisWindow.TitleBarContent>
        <StackPanel Orientation="Horizontal"
                    VerticalAlignment="Top"
                    HorizontalAlignment="Left">

            <ToolBarTray x:Name="ToolBarTray">

                <ToolBar Band="0"                         
                         BandIndex="0"                         
                         Name="toolBarMenu">

                    <Menu x:Name="menu" 
                          Style="{StaticResource ResourceKey={x:Static ToolBar.MenuStyleKey}}"
                          DataContext="{Binding MenuVM}"
                          ItemsSource="{Binding RootItems}"
                          UsesItemContainerTemplate="True"
                          ItemContainerTemplateSelector="{StaticResource MenuTemplateSelectorVMKey}">
                        <Menu.Resources>
                            <HierarchicalDataTemplate DataType="{x:Type c:MenuItemVM}"
                                                      ItemsSource="{Binding Items}" />
                        </Menu.Resources>
                    </Menu>

                </ToolBar>

                <ToolBar Band="1"
                         BandIndex="0"
                         Name="toolBarButtonGliph"
                         ItemTemplateSelector="{StaticResource ToolTemplateSelectorVMKey}"
                         DataContext="{Binding ToolGlyphVM}"
                         ItemsSource="{Binding Items}" />

                <ToolBar Band="2"
                         BandIndex="0"
                         Name="toolBarButtonText"
                         ItemTemplateSelector="{StaticResource ToolTemplateSelectorVMKey}"
                         DataContext="{Binding ToolTextVM}"
                         ItemsSource="{Binding Items}" />
                
            </ToolBarTray>
            
        </StackPanel>
    </adonisControls:AdonisWindow.TitleBarContent>


        <Grid Name="gridRoot">

        <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <a:DockingManager Name="dockManager" Grid.Row="0" 
                          AutoHideWindowClosingTimer="100" 
                          ActiveContent="{Binding ActiveDocument, Mode=TwoWay, Converter={StaticResource VMtoLayoutContentConverterKey}}"
                          AnchorablesSource="{Binding Tools}"
                          DocumentsSource="{Binding Docs}"                          
                          DocumentHeaderTemplate="{StaticResource LayoutDocumentHeaderKey}"
                          DocumentTitleTemplate="{StaticResource LayoutDocumentHeaderKey}"
                          DataContext="{StaticResource DockManagerVMKey}"
                          LayoutUpdateStrategy="{StaticResource LayoutInitializerKey}"
                          LayoutItemTemplateSelector="{StaticResource PanesTemplateSelectorKey}"
                          LayoutItemContainerStyleSelector="{StaticResource PanesStyleSelectorKey}"
                          AllowMixedOrientation="True">
            <!--<a:DockingManager.DataContext>
                <vm:DockManagerVM/>
            </a:DockingManager.DataContext>            
            <a:DockingManager.LayoutItemTemplateSelector>
                <vp:PanesTemplateSelector/>
            </a:DockingManager.LayoutItemTemplateSelector>            
            <a:DockingManager.LayoutItemContainerStyleSelector>
                <vp:PanesStyleSelector/>
            </a:DockingManager.LayoutItemContainerStyleSelector>            
            <a:DockingManager.LayoutUpdateStrategy>
                <vp:LayoutInitializer/>
            </a:DockingManager.LayoutUpdateStrategy>-->
            
            <!--<a:DockingManager.AnchorableContextMenu>
                <ContextMenu>
                    <ContextMenu.ItemsSource>
                        <CompositeCollection>
                            <CollectionContainer Collection="{StaticResource m1}"/>
                            <c:PrioritySeparator Priority="20"/>
                            <CollectionContainer Collection="{StaticResource m2}"/>
                        </CompositeCollection>
                    </ContextMenu.ItemsSource>
                </ContextMenu>
            </a:DockingManager.AnchorableContextMenu>-->

            <!--AutoWindowSizeWhenOpened="True">
            AutoWindowSizeWhenOpened="True"
            IsVirtualizingAnchorable="True"
            IsVirtualizingDocument="True">-->

            <a:LayoutRoot x:Name="layRoot">
                <a:LayoutPanel x:Name="layRootPanel">
                    <a:LayoutDocumentPane x:Name="layRootDock"/>
                </a:LayoutPanel>
            </a:LayoutRoot>
                    
        </a:DockingManager>

        <StatusBar Name="sb" Grid.Row="1" VerticalAlignment="Bottom">
            <StatusBarItem>
                <TextBlock><Run Text="Downloading File"/></TextBlock>
            </StatusBarItem>
            <StatusBarItem>
                <ProgressBar Width="100" Height="20" x:Name="progressBar1">
                    <ProgressBar.Triggers>
                        <EventTrigger RoutedEvent="FrameworkElement.Loaded">
                            <BeginStoryboard>
                                <Storyboard>
                                    <DoubleAnimation From="0" To="100" Duration="0:0:5" 
                                                         Storyboard.TargetName="progressBar1" 
                                                         Storyboard.TargetProperty="Value" />
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger>
                    </ProgressBar.Triggers>
                </ProgressBar>
            </StatusBarItem>
            <Separator Width="1"/>
            <StatusBarItem>
                <TextBlock Text="{Binding Path=RootDocInstance, Converter={StaticResource RootFileDocumentVMtoStringConverterKey}}" />
                <!--<Run Text="Online" />-->
            </StatusBarItem>
            <StatusBarItem HorizontalAlignment="Right">
                <Image Source="/PinDocMenu.png" Width="16" Height="16"/>
            </StatusBarItem>
        </StatusBar>
    </Grid>
</adonisControls:AdonisWindow>
